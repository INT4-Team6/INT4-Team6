{"ast":null,"code":"var _jsxFileName = \"/Users/sarahvandenberghe/School/Devine/20192020/Integration-4/INT4_Group6/client/src/components/Map/index.jsx\";\nimport React, { useRef, useEffect } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport styles from './Map.module.css';\nimport { useObserver } from 'mobx-react-lite'; // import data from './../../data/region.json' \n\nmapboxgl.accessToken = 'pk.eyJ1IjoiY2FyZG9lbmxpZW4iLCJhIjoiY2tiODI3Znl4MDAyazJ4cXJ6cWNvdWswcSJ9.aVAGrbiyl5I5yb5KROaD7A';\n\nconst Map = () => {\n  const mapContainerRef = useRef(null);\n\n  const regionsJson = require('./../../data/region.json');\n\n  const ancestorsJson = require('./../../data/ancestors.json');\n\n  useEffect(() => {\n    const map = new mapboxgl.Map({\n      container: mapContainerRef.current,\n      style: 'mapbox://styles/mapbox/dark-v10',\n      center: [13.356, 34.047],\n      zoom: 1.5\n    });\n    let hoveredRegionId = null;\n    map.on(\"load\", function () {\n      console.log(\"load\");\n      map.addSource('regions', {\n        type: 'geojson',\n        data: regionsJson\n      });\n      map.addLayer({\n        id: 'regions-layer',\n        type: 'fill',\n        source: 'regions',\n        paint: {\n          'fill-color': 'rgba(200, 100, 240, 0.4)',\n          'fill-outline-color': 'rgba(200, 100, 240, 1)',\n          'fill-opacity': ['case', ['boolean', ['feature-state', 'zoom'], false], 0.2, 1]\n        }\n      }); // ADD BORDER\n\n      map.addLayer({\n        id: \"region-borders\",\n        type: \"line\",\n        source: \"regions\",\n        layout: {},\n        paint: {\n          \"line-color\": \"rgba(200, 100, 240, 0.8)\",\n          \"line-width\": 2,\n          \"line-opacity\": [\"case\", [\"boolean\", [\"feature-state\", \"zoom\"], false], 0.4, 1]\n        }\n      });\n      map.addLayer({\n        id: \"region-info-percentage\",\n        source: \"regions\",\n        type: \"symbol\",\n        layout: {\n          \"text-field\": [\"concat\", [\"to-string\", [\"get\", \"ROOTS_PERCENTAGE\"]], \"%\"],\n          \"text-font\": [\"Open Sans Bold\", \"Arial Unicode MS Bold\"],\n          \"text-size\": 20\n        },\n        paint: {\n          \"text-color\": \"rgba(255,255,255,1)\"\n        }\n      });\n      map.addLayer({\n        id: \"region-info-amount\",\n        source: \"regions\",\n        type: \"symbol\",\n        layout: {\n          \"text-field\": [\"concat\", [\"to-string\", [\"get\", \"NUMBER_ANCESTORS\"]], \" ancestors\"],\n          \"text-font\": [\"Open Sans Regular\", \"Arial Unicode MS Regular\"],\n          \"text-size\": 14,\n          \"text-offset\": [0, 3]\n        },\n        paint: {\n          \"text-color\": \"rgba(255,255,255,1)\"\n        }\n      }); // ANCESTORS\n\n      ancestorsJson.features.forEach(function (marker) {\n        const el = document.createElement('div');\n        el.className = 'marker';\n        el.style.backgroundImage = 'url(https://placekitten.com/g/' + marker.properties.iconSize.join('/') + '/)';\n        el.style.width = marker.properties.iconSize[0] + 'px';\n        el.style.height = marker.properties.iconSize[1] + 'px';\n        el.addEventListener('click', function () {\n          window.alert('klik');\n        }); // add marker to map\n\n        new mapboxgl.Marker(el).setLngLat(marker.geometry.coordinates).addTo(map);\n      }); // ON CLICK\n\n      map.on('click', 'regions-layer', function (e) {\n        console.log(e.features[0]);\n        map.flyTo({\n          center: [e.features[0].properties.ZOOMX, e.features[0].properties.ZOOMY],\n          essential: true,\n          zoom: 5\n        });\n        hoveredRegionId = e.features[0].id;\n        map.setFeatureState({\n          source: 'regions',\n          id: hoveredRegionId\n        }, {\n          zoom: true\n        });\n      });\n      map.on('zoomend', function () {\n        if (map.getZoom() < 4) {\n          // reset de feature \"regions\" -> dus allemaal op standaard zetten\n          map.removeFeatureState({\n            source: 'regions'\n          });\n        }\n      });\n      var popup = new mapboxgl.Popup({\n        closeOnClick: false,\n        offset: [0, -15]\n      });\n      map.on('mouseenter', 'regions-layer', function (e) {\n        // Change the cursor to a pointer when the mouse is over the states layer.\n        map.getCanvas().style.cursor = 'pointer';\n\n        if (e.features.length > 0) {\n          popup.setLngLat(e.lngLat).setHTML(e.features[0].properties.REGION_NAME).addTo(map);\n        }\n      });\n      map.on('mouseleave', 'regions-layer', function () {\n        // Change it back to a pointer when it leaves.\n        map.getCanvas().style.cursor = '';\n        popup.remove();\n      }); // MIN MAX Zoom\n\n      map.setMaxZoom(5);\n      map.setMinZoom(1.5);\n    });\n    return () => map.remove();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.mapContainer,\n    ref: mapContainerRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }\n  });\n};\n\nexport default Map;","map":{"version":3,"sources":["/Users/sarahvandenberghe/School/Devine/20192020/Integration-4/INT4_Group6/client/src/components/Map/index.jsx"],"names":["React","useRef","useEffect","mapboxgl","styles","useObserver","accessToken","Map","mapContainerRef","regionsJson","require","ancestorsJson","map","container","current","style","center","zoom","hoveredRegionId","on","console","log","addSource","type","data","addLayer","id","source","paint","layout","features","forEach","marker","el","document","createElement","className","backgroundImage","properties","iconSize","join","width","height","addEventListener","window","alert","Marker","setLngLat","geometry","coordinates","addTo","e","flyTo","ZOOMX","ZOOMY","essential","setFeatureState","getZoom","removeFeatureState","popup","Popup","closeOnClick","offset","getCanvas","cursor","length","lngLat","setHTML","REGION_NAME","remove","setMaxZoom","setMinZoom","mapContainer"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport mapboxgl from 'mapbox-gl'; \nimport styles from './Map.module.css';\nimport { useObserver } from 'mobx-react-lite';\n// import data from './../../data/region.json' \nmapboxgl.accessToken = 'pk.eyJ1IjoiY2FyZG9lbmxpZW4iLCJhIjoiY2tiODI3Znl4MDAyazJ4cXJ6cWNvdWswcSJ9.aVAGrbiyl5I5yb5KROaD7A';\n\nconst Map = () => {\n    const mapContainerRef = useRef(null);\n    const regionsJson = require('./../../data/region.json');\n    const ancestorsJson = require('./../../data/ancestors.json');\n\n      useEffect(() => {\n        const map = new mapboxgl.Map({\n          container: mapContainerRef.current,\n          style: 'mapbox://styles/mapbox/dark-v10',\n            center: [13.356, 34.047],\n            zoom: 1.5,\n        });\n\n        let hoveredRegionId = null;\n        map.on(\"load\", function() {\n            console.log(\"load\")\n          map.addSource('regions', {\n            type: 'geojson',\n            data: regionsJson,\n          });\n\n          map.addLayer({\n            id: 'regions-layer',\n            type: 'fill',\n            source: 'regions',\n            paint: {\n              'fill-color': 'rgba(200, 100, 240, 0.4)',\n              'fill-outline-color': 'rgba(200, 100, 240, 1)',\n              'fill-opacity': [\n                'case',\n                ['boolean', ['feature-state', 'zoom'], false],\n                0.2,\n                1,\n              ],\n            },\n          });\n\n            // ADD BORDER\n            map.addLayer({\n                id: \"region-borders\",\n                type: \"line\",\n                source: \"regions\",\n                layout: {},\n                paint: {\n                \"line-color\": \"rgba(200, 100, 240, 0.8)\",\n                \"line-width\": 2,\n                \"line-opacity\": [\n                    \"case\",\n                    [\"boolean\", [\"feature-state\", \"zoom\"], false],\n                    0.4,\n                    1\n                ]\n                }\n            });\n\n            map.addLayer({\n                id: \"region-info-percentage\",\n                source: \"regions\",\n                type: \"symbol\",\n                layout: {\n                \"text-field\": [\"concat\", [\"to-string\", [\"get\", \"ROOTS_PERCENTAGE\"]], \"%\"],\n                \"text-font\": [\"Open Sans Bold\", \"Arial Unicode MS Bold\"],\n                \"text-size\": 20\n                },\n                paint: {\n                \"text-color\": \"rgba(255,255,255,1)\"\n                }\n            });\n\n            map.addLayer({\n                id: \"region-info-amount\",\n                source: \"regions\",\n                type: \"symbol\",\n                layout: {\n                \"text-field\": [\n                    \"concat\",\n                    [\"to-string\", [\"get\", \"NUMBER_ANCESTORS\"]],\n                    \" ancestors\"\n                ],\n                \"text-font\": [\"Open Sans Regular\", \"Arial Unicode MS Regular\"],\n                \"text-size\": 14,\n                \"text-offset\": [0, 3]\n                },\n                paint: {\n                \"text-color\": \"rgba(255,255,255,1)\"\n                }\n            });\n\n            // ANCESTORS\n            ancestorsJson.features.forEach(function (marker) {\n              const el = document.createElement('div');\n              el.className = 'marker';\n              el.style.backgroundImage =\n                'url(https://placekitten.com/g/' +\n                marker.properties.iconSize.join('/') +\n                '/)';\n              el.style.width = marker.properties.iconSize[0] + 'px';\n              el.style.height = marker.properties.iconSize[1] + 'px';\n\n              el.addEventListener('click', function () {\n                window.alert('klik');\n              });\n\n              // add marker to map\n              new mapboxgl.Marker(el)\n                .setLngLat(marker.geometry.coordinates)\n                .addTo(map);\n            });\n\n            // ON CLICK\n            map.on('click', 'regions-layer', function (e) {\n              console.log(e.features[0]);\n\n              map.flyTo({\n                center: [\n                  e.features[0].properties.ZOOMX,\n                  e.features[0].properties.ZOOMY,\n                ],\n                essential: true,\n                zoom: 5,\n              });\n              hoveredRegionId = e.features[0].id;\n              map.setFeatureState(\n                { source: 'regions', id: hoveredRegionId },\n                { zoom: true }\n              );\n            });\n\n            map.on('zoomend', function () {\n              if (map.getZoom() < 4) {\n                // reset de feature \"regions\" -> dus allemaal op standaard zetten\n                map.removeFeatureState({\n                  source: 'regions',\n                });\n              }\n            });\n\n\n            var popup = new mapboxgl.Popup({\n              closeOnClick: false,\n              offset: [0, -15],\n            });\n\n            map.on('mouseenter', 'regions-layer', function (e) {\n              // Change the cursor to a pointer when the mouse is over the states layer.\n              map.getCanvas().style.cursor = 'pointer';\n\n              if (e.features.length > 0) {\n                popup\n                  .setLngLat(e.lngLat)\n                  .setHTML(e.features[0].properties.REGION_NAME)\n                  .addTo(map);\n              }\n            });\n\n            map.on('mouseleave', 'regions-layer', function () {\n              // Change it back to a pointer when it leaves.\n              map.getCanvas().style.cursor = '';\n              popup.remove();\n            });\n\n            // MIN MAX Zoom\n            map.setMaxZoom(5);\n            map.setMinZoom(1.5);\n\n\n        });\n\n        return () => map.remove();\n      }, []); \n\n      return (\n        <div className={styles.mapContainer} ref={mapContainerRef} />  \n      );\n};\n\nexport default Map;\n"]},"metadata":{},"sourceType":"module"}